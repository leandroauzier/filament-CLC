var HomeIndex=function(){var a;var b=function(){$("#searchBox").autocomplete({source:function(f,e){$.ajax({url:"/editais/pesquisaRapida.json",data:{issuanceNumber:f.term,tradeOfficeId:$("#tradeOffice").val()},dataType:"json",success:function(g){e(g)}})},response:function(e,f){var g=f.content;if(g.length>0&&g[0].resultCount>g.length){g[g.length]={seeMore:true}}},select:function(e,f){e.preventDefault();if(f.item.seeMore){$("#InButton_buscaRapida").attr("id","InLink_sugestao_verTodos").click()}else{window.location="/editais/"+f.item.simplifiedIssuanceNumber+"/"+f.item.id}},minLength:4,delay:200}).autocomplete("instance")._renderItem=function(f,g){var e;if(g.seeMore){e=$('<li id="InLink_sugestao_verTodos"><a class="btn btn-link">Ver todos os resultados</a></li>')}else{e=$("<li>").append("<a><strong>"+g.issuanceNumber+"</strong><br/>"+g.biddingTypeName+"<br/>"+g.tradeOffice+"</a>").attr("id","InLink_sugestao_"+g.id)}return e.appendTo(f)};$(".date-picker").datepicker({rtl:Metronic.isRTL(),orientation:"left",autoclose:true,todayHighlight:true,language:"pt-BR"})};var c=function(){function f(u,n,q){if(!u&&u!=0){return""}var m="";var s=e(u,n).split(".");if(q){m=s[0]}else{var r="";if(s[0].charAt(0)=="-"){s[0]=s[0].replace("-","");r="-"}for(var p=s[0].length-1,o=1;p>=0;p--,o++){m=s[0].charAt(p)+m;if(p>0&&o%3==0){m="."+m}}m=r+m}if(n>0){var t=s[1]?s[1].length:0;m+=","+(t>0?s[1]:"");for(var p=t;p<n;p++){m+="0"}}return m}function e(o,m){var n=Math.pow(10,m||0);return String(Math.round(o*n)/n)}function l(m,o,n){$('<div id="tooltip">'+n+"</div>").css({position:"absolute",display:"none",top:o-50,left:m-28,border:"1px solid #333",padding:"4px",color:"#fff","border-radius":"3px","background-color":"#333",opacity:0.8}).appendTo("body").fadeIn(200)}var h=null,j=null;var k=a.monthlyExpenses;var i=[];$.each(k,function(m,n){i.push([n.caption,n.totalSpent])});if($(window).width()<400){i=i.splice(3,5)}$.plot($("#chart_1_1"),[{data:i,label:"&nbsp;Total negociado"}],{series:{bars:{show:true,barWidth:0.7,align:"center"}},xaxis:{mode:"categories",tickLength:0},grid:{clickable:true,hoverable:true,borderWidth:1,tickColor:"#eee",borderColor:"#eee",margin:{bottom:20,left:20}}});$("#chart_1_1").on("plothover",function(o,q,n){if(n){if((j!=n.series.label)||(h!=n.dataIndex)){h=n.dataIndex;j=n.series.label;$("#tooltip").remove();var m=n.datapoint[0];var p=n.datapoint[1];l(n.pageX,n.pageY,n.series.xaxis.ticks[m].label+"<br><strong>R$ "+f(p,2)+(a.hasReducer?" mil":" milhões")+"</strong>")}}else{$("#tooltip").remove();h=null}});var g=$("<div class='axisLabel yaxisLabel'></div>").text(a.hasReducer?"R$ Milhares":"R$ Milhões").appendTo($("#chart_1_1"));g.css("margin-top",g.width()/2-20)};var d=function(){var e=new Datatable();var f=function(){var g=function(){e.init({src:$("#activeLotsDatatable"),onSend:e.getOnSendGACallback("/editais/lotes/ativos",{search:{category:"activeLots"}}),dataTable:{bStateSave:false,deferLoading:true,data:[],ajax:{url:"/editais/lotes/ativos.json",type:"POST"},columns:[{data:"procurement.tradeOffice"},{data:"procurement.biddingTypeName"},{data:"procurement.issuanceNumber"},{data:"order"},{data:"title"}],language:{zeroRecords:"Não há editais com lotes em andamento"},createdRow:function(j,i,h){$(j).attr("id",i.id+"-"+i.procurement.simplifiedIssuanceNumber).attr("href","#liveDispute").attr("data-toggle","modal")}}});$("#activeLots").on("click","tbody tr",function(){var h=$(this).attr("id").split("-");$("#liveDispute").livedispute({rootUrl:"/",tradeOffice:$(this).children().eq(0).text(),issuanceNumber:h[1],visibleIssuanceNumber:$(this).children().eq(2).text(),lotId:h[0],lotNumber:$(this).children().eq(3).text(),error:function(){$("#liveDispute").modal("hide");$("#activeLots").modal("hide")}})})};return{init:function(){g();$(".filter-submit").click(function(i){i.preventDefault();$(".alert").hide();$('textarea.form-filter, select.form-filter, input.form-filter:not([type="radio"],[type="checkbox"])').each(function(){e.setAjaxParam($(this).attr("name"),$(this).val())});e.submitFilter()});var h=new Image();h.onerror=function(){BootstrapDialog.ajaxInfoDialog("/warning",{},{title:"Sistema de Compras Eletrônicas",type:BootstrapDialog.TYPE_WARNING})};h.src="https://www.compras.rs.gov.br/egov2/assets/management/layout/img/logoCelic.png"}}}();f.init();$("#activeLots").on("show.bs.modal",function(g){$(".filter-submit").click()})};return{init:function(e){a=e;b();d();c()}}}();